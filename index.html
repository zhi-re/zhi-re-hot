<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>炙热榜单</title>
    <link rel="apple-touch-icon" sizes="180x180" href="./static/img/favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./static/img/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./static/img/favicon.png">
    <link href="./static/css/tabler.min.css" rel="stylesheet"/>
    <link href="./static/css/tabler-flags.min.css" rel="stylesheet"/>
    <link href="./static/css/tabler-payments.min.css" rel="stylesheet"/>
    <link href="./static/css/tabler-vendors.min.css" rel="stylesheet"/>
    <link href="./static/css/demo.min.css" rel="stylesheet"/>
    <script src="./static/js/axios.js"></script>
    <script src="./static/js/vue-2.5.21.js"></script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
</head>
<body>
<div class="page" id="vue">
    <header class="navbar navbar-expand-md navbar-light d-print-none">
        <div class="container-xl">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu">
                <span class="navbar-toggler-icon"></span>
            </button>
            <h1 class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
                <a href=".">
                    <img src="./static/img/logo.png" alt="Tabler" class="navbar-brand-image">
                </a>
            </h1>
            <div class="navbar-nav flex-row order-md-last">
                <div class="nav-item d-none d-md-flex me-3">
                    <div class="btn-list">
                        <a href="https://github.com/zhi-re/zhi-re-hot" class="btn" target="_blank" rel="noreferrer">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"/>
                            </svg>
                            Github
                        </a>
                    </div>
                </div>
                <div class="d-none d-md-flex">
                    <a href="?theme=dark" class="nav-link px-0 hide-theme-dark" title="Enable dark mode"
                       data-bs-toggle="tooltip" data-bs-placement="bottom">
                        <!-- Download SVG icon from http://tabler-icons.io/i/moon -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24"
                             stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                             stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                            <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"/>
                        </svg>
                    </a>
                    <a href="?theme=light" class="nav-link px-0 hide-theme-light" title="Enable light mode"
                       data-bs-toggle="tooltip" data-bs-placement="bottom">
                        <!-- Download SVG icon from http://tabler-icons.io/i/sun -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24"
                             stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                             stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                            <circle cx="12" cy="12" r="4"/>
                            <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"/>
                        </svg>
                    </a>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown"
                       aria-label="Open user menu" target="_blank">
                        &nbsp;&nbsp;<span class="avatar avatar-sm"
                                          style="background-image: url(https://0.cr/head.jpg)"></span>
                        <div class="d-none d-xl-block ps-2">
                            <div>chenqi</div>
                            <div class="mt-1 small text-muted"></div>
                        </div>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                        <a href="https://0.cr" class="dropdown-item" target="_blank">我的博客</a>
                        <div class="dropdown-divider"></div>
                        <a href="https://tool.0.cr" class="dropdown-item" target="_blank">我的工具</a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="navbar-expand-md">
        <div class="collapse navbar-collapse" id="navbar-menu">
        </div>
    </div>
    <div class="page-wrapper">
        <div class="container-xl">
            <!-- Page title -->
            <!--            <div class="page-header d-print-none">-->
            <!--                <div class="row g-2 align-items-center">-->
            <!--                    <div class="col">-->
            <!--                        <h2 class="page-title">-->
            <!--                             Activity-->
            <!--                        </h2>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--            </div>-->
        </div>
        <div class="page-body">
            <div class="container-xl">
                <div class="row justify-content-center">
                    <div class="col-8">
                        <div class="card">
                            <div class="card-body">
                                <div class="divide-y">

                                    <div v-for="(item, index) in info.data">
                                        <div class="row">
                                            <div class="col-auto">
																<span v-if="index<3" class="avatar"
                                                                      style="color: red;background: white"> {{index+1}} </span>
                                                <span v-if="index>=3" class="avatar"
                                                      style="color: orange;background: white"> {{index+1}} </span>
                                            </div>
                                            <div class="col">
                                                <div class="text-truncate" style="margin-bottom: 5px">
                                                    <a :href="item.url" target="_blank"> {{item.hotText}}</a>
                                                </div>
                                                <div class="text-muted">
                                                    <img :src="showSourceUrl(item.source)"
                                                         style="width: 14px; height: 14px;">
                                                    {{showSource(item.source)}} • {{showTime(item.hotDate)}}

                                                    <el-tag v-if="item.hotCount!==null && item.hotCount!==''"
                                                            size="mini"> {{item.hotCount}}
                                                    </el-tag>
                                                    <el-tag v-if="item.hotExtra!==null && item.hotExtra!==''"
                                                            type="danger" effect="dark"
                                                            size="mini">
                                                        {{item.hotExtra}}
                                                    </el-tag>
                                                </div>
                                            </div>
                                            <!--  蓝点-->
                                            <!--  <div class="col-auto align-self-center">-->
                                            <!--		<div class="badge bg-primary"></div>-->
                                            <!--  </div>-->
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer footer-transparent d-print-none">
            <div class="container-xl">
                <div class="row text-center align-items-center flex-row-reverse">
                    <div class="col-lg-auto ms-lg-auto">
                        <ul class="list-inline list-inline-dots mb-0">
                            <li class="list-inline-item">
                                <a href="https://github.com/zhi-re" target="_blank" class="link-secondary"
                                   rel="noopener">
                                    <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                         class="icon text-pink icon-filled icon-inline" width="24" height="24"
                                         viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                         stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                        <path d="M19.5 13.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"/>
                                    </svg>
                                    zhi.re
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                        <ul class="list-inline list-inline-dots mb-0">
                            <li class="list-inline-item">
                                Copyright &copy; 2022
                                <a href="." class="link-secondary">zhi.re</a>.
                                All rights reserved.
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</div>


<script type="text/javascript">
    new Vue({
        el: '#vue', data() {
            return {
                info:
                    {
                        "data": [
                            {
                                "hotText": null,
                                "hotCount": null,
                                "hotDate": null,
                                "url": null,
                                "source": null,
                            }
                        ],
                        codeNum: null,
                        message: null
                    }
            }
        },
        mounted() {
            // axios.get('http://127.0.0.1:8080/crawler/getHotList').then(response => (this.info = response.data));
            axios.get('https://zhi.re/crawler/getHotList').then(response => (this.info = response.data));
        },
        methods: {
            showTime: function showTime(hotDate) {
                if (hotDate === null) return;
                return getTimer(hotDate + ":00");
            },
            showSource: function showSource(source) {
                let sourceDesc = "";
                if (source === 1) sourceDesc = "微博";
                else if (source === 2) sourceDesc = "百度";
                else if (source === 3) sourceDesc = "头条";
                return sourceDesc;
            },
            showSourceUrl: function showSourceUrl(source) {
                let sourceDesc = "";
                if (source === 1) sourceDesc = "https://www.weibo.com/favicon.ico";
                else if (source === 2) sourceDesc = "https://www.baidu.com/favicon.ico";
                else if (source === 3) sourceDesc = "https://www.toutiao.com/favicon.ico";
                return sourceDesc;
            },
        }
    });

    function getTimer(stringTime) {
        var minute = 1000 * 60;
        var hour = minute * 60;
        var day = hour * 24;
        var week = day * 7;
        var month = day * 30;
        var time1 = new Date().getTime();//当前的时间戳
        var time2 = Date.parse(new Date(stringTime));//指定时间的时间戳
        var time = time1 - time2;
        var result = "刚刚";
        if (time / month >= 1) {
            result = parseInt(time / month) + "月前";
        } else if (time / week >= 1) {
            result = parseInt(time / week) + "周前";
        } else if (time / day >= 1) {
            result = parseInt(time / day) + "天前";
        } else if (time / hour >= 1) {
            result = parseInt(time / hour) + "小时前";
        } else if (time / minute >= 1) {
            result = parseInt(time / minute) + "分钟前";
        }
        return result;
    }
</script>

<script src="./static/js/tabler.min.js" defer></script>
<script src="./static/js/demo.min.js" defer></script>


</body>
</html>